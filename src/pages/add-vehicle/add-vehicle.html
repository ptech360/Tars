<ion-header>
    <ion-toolbar color="primary">
        <ion-navbar>
            <ion-title>Add Involved Vehicle</ion-title>
        </ion-navbar>
        <ion-buttons end>
            <button ion-button icon-only (click)="goToHome()">
                <ion-icon name="home"></ion-icon>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<!-- <ion-title>Vehicle 1</ion-title> -->

<ion-content class="background" padding>
    <form [formGroup]="vehicleFormGroup">
        <!-- <ng-container formArrayName="vehicles"> -->
        <!-- <ion-card *ngFor="let vehicle of accidentForm.controls.vehicles['controls']; let i = index"
                [formGroupName]="i"> -->
        <ion-card class="add-vehicle-card">
            <ion-card-header no-padding>
                <ion-item style="background-color:rgba(0,0,0,0.03) !important;">
                    Vehicle {{accidentGlobalObject.vehicleCounter + 1}}
                </ion-item>
            </ion-card-header>
            <ion-item class="vehicle-number">
                <ion-label stacked>Vehicle Number
                    <code>*</code> </ion-label>
                <ion-input type="text" formControlName="number" autocapitalize="characters"></ion-input>
            </ion-item>
            <ion-item class="vehicle-model">
                <ion-label stacked>Vehicle Model
                    <code>*</code> </ion-label>
                <ion-input type="text" formControlName="model" autocapitalize="characters"></ion-input>
            </ion-item>
            <div class="media-list-box" margin-top padding>
                <ion-list>
                    <media #media [formGroup]="vehicleFormGroup"></media>
                </ion-list>
            </div>

            <!-- <ion-list *ngIf="vehicle.get('persons')"> -->
            <ion-list>
                <div class="person-list-main" formArrayName="persons">
                    <ion-card [formGroupName]="i" *ngFor="let person of vehicleFormGroup.controls.persons['controls'];let i=index;">
                        <!-- <ion-list>
                    <div formArrayName="persons">
                        <ion-card [formGroupName]="i"
                            *ngFor="let person of vehicle.controls.persons['controls'];let i=index;"> -->
                        <!-- <ion-list-header margin-top-bottom-0 *ngIf="i==0">
                                Driver Details
                            </ion-list-header>
                            <ion-list-header margin-top-bottom-0 *ngIf="i>0">
                                Passenger Details
                            </ion-list-header> -->
                        <ion-card-header no-padding>
                            <ion-item>
                                <span *ngIf="i==0">Driver Details</span>
                                <!-- Person {{i+1}} -->
                                <span *ngIf="i>0">Passenger Details</span>
                                <button class="edit" ion-button color="primary" clear icon-only item-end (click)="editPerson(i)">
                                    <ion-icon name='create' is-active="false"></ion-icon>
                                </button>
                                <button class="delete" ion-button color="danger" clear icon-only item-end (click)="removePerson(i)" *ngIf="i>0">
                                    <ion-icon name='trash' is-active="false"></ion-icon>
                                </button>

                            </ion-item>
                        </ion-card-header>
                        <ion-item>
                            <ion-label>
                                <b>Name : </b>{{person.controls.name.value}}</ion-label>
                        </ion-item>
                        <ion-item>
                            <ion-label>
                                <b>Driving Licence : </b>{{person.controls.licence.value}}</ion-label>
                        </ion-item>
                        <ion-item>
                            <ion-label>
                                <b>Age : </b>{{person.controls.age.value}}</ion-label>
                        </ion-item>
                        <ion-item>
                            <ion-label>
                                <b>Gender : </b>{{person.controls.gender.value}}</ion-label>
                        </ion-item>
                        <ion-item>
                            <ion-label>
                                <b>Address : </b>{{person.controls.address.value}}</ion-label>
                        </ion-item>
                        <!-- <ion-item>
                                <ion-label><b>Under Influence  : </b>{{person.controls.underInfluence.value}}</ion-label>                                
                            </ion-item>
                            <ion-item>
                                <ion-label><b>Type and Extent of Human Factor : </b>{{person.controls.typeAndExtendOfHumanFactor.value}}</ion-label>
                            </ion-item>
                            <ion-item>
                                <ion-label><b>Nature of any injuries : </b>{{person.controls.natureOfAnyInjuries.value}}</ion-label>
                            </ion-item>
                            <ion-item>
                                <ion-label><b>Data on Socio-economic status : </b>{{person.controls.dataOnSocioEconomicStatus.value}}</ion-label>
                            </ion-item> -->
                    </ion-card>
                </div>

            </ion-list>
            <div padding-left padding-right>
                <button ion-button block small *ngIf="vehicleFormGroup.controls.persons['controls'].length == 0" (click)="addDriver()">Add Driver</button>
            </div>
            <div padding-left padding-right>
                <button ion-button block small *ngIf="vehicleFormGroup.controls.persons['controls'].length" (click)="addPerson()">Add Passenger</button>
            </div>
        </ion-card>
        <!-- </ng-container> -->
    </form>
    <div>
        <button type="button" ion-button block [disabled]="vehicleFormGroup.invalid" (click)="saveVehicle()">Save Vehicle and Continue</button>
    </div>

    <!-- <ng-container *ngIf="accidentForm['pedestrians']">
        <ion-card *ngFor="let ped of accidentForm['pedestrians']; let j=index">
            <ion-card-header>
                Pedestrain {{j+1}}
                <button ion-button color="danger" clear icon-only item-end
                (click)="removePedestrian(j)">
                <ion-icon name='trash' is-active="false"></ion-icon>
            </button>
            </ion-card-header>
            <ion-item>
                <ion-label>Name : {{ped.name}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-label>Age : {{ped.age}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-label>Gender : {{ped.gender}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-label>Under Influence : {{ped.underInfluence}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-label>Nature Of Any Injuries : {{ped.natureOfAnyInjuries}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-label>Data On Socio Economic Status : {{ped.dataOnSocioEconomicStatus}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-label>Type and Extend of Human Factor : {{ped.typeAndExtendOfHumanFactor}}</ion-label>
            </ion-item>
        </ion-card>
    </ng-container> -->

    <!-- <div padding>
        <button type="button" ion-button block color="tertiary" *ngIf="accidentForm['index']>accidentForm['numOfVehicle']-1" (click)="addPedestrian()">Add Pedestrain</button>
    </div> -->

</ion-content>
<ion-footer>
    <!-- <button type="button" ion-button block small>Back</button>
    <button type="button" ion-button block color="secondary" *ngIf="accidentForm['index']>accidentForm['numOfVehicle']-1" (click)="submitAccident()">Submit</button> -->
</ion-footer>